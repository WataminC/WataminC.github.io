<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.7" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.23" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://www.wataminc.top/MD/School/DatabaseSystem/Chapter7.html"><meta property="og:site_name" content="Watamin C"><meta property="og:description" content="1. 深刻理解事务的概念。熟记事务的ACID性质（包括英文单词、解释、实现机制）。 事务是由一系列访问和更新操作组成的程序执行单元。这些操作要么都做，要么都不做，是一个不可分割的整体 原子性 (Atomicity) 事务中包含的所有操作(特指修改操作)要么全部做，要么全不做 原子性由恢复机制实现 一致性(Consistency) 独立执行一个事务（无其..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-07-01T16:58:07.000Z"><meta property="article:author" content="Watamin C"><meta property="article:modified_time" content="2024-07-01T16:58:07.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"","image":[""],"dateModified":"2024-07-01T16:58:07.000Z","author":[{"@type":"Person","name":"Watamin C","url":"www.wataminc.top"}]}</script><title>Watamin C</title><meta name="description" content="1. 深刻理解事务的概念。熟记事务的ACID性质（包括英文单词、解释、实现机制）。 事务是由一系列访问和更新操作组成的程序执行单元。这些操作要么都做，要么都不做，是一个不可分割的整体 原子性 (Atomicity) 事务中包含的所有操作(特指修改操作)要么全部做，要么全不做 原子性由恢复机制实现 一致性(Consistency) 独立执行一个事务（无其...">
    <link rel="preload" href="/assets/style-DXQCsQxL.css" as="style"><link rel="stylesheet" href="/assets/style-DXQCsQxL.css">
    <link rel="modulepreload" href="/assets/app-05daWFUP.js"><link rel="modulepreload" href="/assets/Chapter7.html-DyN0aPep.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/AboutMe.html-Bfd-sNi4.js" as="script"><link rel="prefetch" href="/assets/index.html-CglR7Gtn.js" as="script"><link rel="prefetch" href="/assets/intro.html-Doot-CZu.js" as="script"><link rel="prefetch" href="/assets/index.html-CFTyPmXp.js" as="script"><link rel="prefetch" href="/assets/index.html-PxRXSHAj.js" as="script"><link rel="prefetch" href="/assets/index.html-D_ZLG1i9.js" as="script"><link rel="prefetch" href="/assets/index.html-CSJ89ErN.js" as="script"><link rel="prefetch" href="/assets/index.html-DjjhjzYZ.js" as="script"><link rel="prefetch" href="/assets/buildYourOwnBlog.html-TehzbV8Q.js" as="script"><link rel="prefetch" href="/assets/index.html-yCMKzxJu.js" as="script"><link rel="prefetch" href="/assets/index.html-WxM_RvGG.js" as="script"><link rel="prefetch" href="/assets/chapter2.html-CdIMT4hy.js" as="script"><link rel="prefetch" href="/assets/chapter3.html-BDLq8w8H.js" as="script"><link rel="prefetch" href="/assets/chapter4.html-CmDud2kV.js" as="script"><link rel="prefetch" href="/assets/chapter5.html-CfILmgze.js" as="script"><link rel="prefetch" href="/assets/index.html-BUl2WvUv.js" as="script"><link rel="prefetch" href="/assets/GMR85.html-BCnRBXnA.js" as="script"><link rel="prefetch" href="/assets/index.html-Q2if6HFQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DpH_XE_T.js" as="script"><link rel="prefetch" href="/assets/draft.html-DgVPg8Qe.js" as="script"><link rel="prefetch" href="/assets/Chapter1.html-_y5IcJji.js" as="script"><link rel="prefetch" href="/assets/Chapter2.html-DdDRlRDI.js" as="script"><link rel="prefetch" href="/assets/Chapter3.html-DsC17Rox.js" as="script"><link rel="prefetch" href="/assets/Chapter5.html-BpiS2mzE.js" as="script"><link rel="prefetch" href="/assets/Chapter8.html-h2qOqWbh.js" as="script"><link rel="prefetch" href="/assets/index.html-DDSW8Fi1.js" as="script"><link rel="prefetch" href="/assets/Chapter4.html-C0dq_dQB.js" as="script"><link rel="prefetch" href="/assets/Chapter5.html-LznNpudW.js" as="script"><link rel="prefetch" href="/assets/Lecture1.html-DZymRUrS.js" as="script"><link rel="prefetch" href="/assets/index.html-BxHVjsZU.js" as="script"><link rel="prefetch" href="/assets/opengauss.html-B4sFmf93.js" as="script"><link rel="prefetch" href="/assets/Chapter14_Graph.html-JVSV2sEn.js" as="script"><link rel="prefetch" href="/assets/index.html-Bwj5j05j.js" as="script"><link rel="prefetch" href="/assets/index.html-BKbSVOkg.js" as="script"><link rel="prefetch" href="/assets/第七章 参数估计.html-DgKXHUf3.js" as="script"><link rel="prefetch" href="/assets/第三章 多维随机变量及其分布.html-e6Ez5I4e.js" as="script"><link rel="prefetch" href="/assets/第二章 随机变量及其分布.html-NQroKPjO.js" as="script"><link rel="prefetch" href="/assets/index.html-BK69E1EB.js" as="script"><link rel="prefetch" href="/assets/Week1.html-CJgfM1rX.js" as="script"><link rel="prefetch" href="/assets/Week2.html-B4C-soiN.js" as="script"><link rel="prefetch" href="/assets/Week3.html-BHjwqN9y.js" as="script"><link rel="prefetch" href="/assets/Week4.html-Ez0_XLit.js" as="script"><link rel="prefetch" href="/assets/Week5.html-BzwG0Y2k.js" as="script"><link rel="prefetch" href="/assets/404.html-BVyDR8ZB.js" as="script"><link rel="prefetch" href="/assets/index.html-Bm_fWF0-.js" as="script"><link rel="prefetch" href="/assets/index.html-DKxDaRbr.js" as="script"><link rel="prefetch" href="/assets/index.html-CrRGJdSH.js" as="script"><link rel="prefetch" href="/assets/index.html-WjPW971y.js" as="script"><link rel="prefetch" href="/assets/index.html-CD5AFxEx.js" as="script"><link rel="prefetch" href="/assets/index.html-BKQQ2Jus.js" as="script"><link rel="prefetch" href="/assets/index.html-BRYgFQ7V.js" as="script"><link rel="prefetch" href="/assets/index.html-CjLouRLw.js" as="script"><link rel="prefetch" href="/assets/index.html-Bh_tyegG.js" as="script"><link rel="prefetch" href="/assets/index.html-tNcBAZA5.js" as="script"><link rel="prefetch" href="/assets/index.html-BB0z_oow.js" as="script"><link rel="prefetch" href="/assets/index.html-MBlEQCIJ.js" as="script"><link rel="prefetch" href="/assets/index.html-S4RZgsEU.js" as="script"><link rel="prefetch" href="/assets/browser-D6eOinvE.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-SzV8tJDW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container no-sidebar has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/"><img class="vp-nav-logo" src="/assets/images/1749_1708228472_hd.jpeg" alt><!----><span class="vp-site-name hide-in-pad">Watamin C</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/" aria-label="主页"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/MD/Computer/" aria-label="CS"><span class="font-icon icon fa-fw fa-sm fas fa-computer" style=""></span>CS<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/MD/Maths/" aria-label="数学相关"><span class="font-icon icon fa-fw fa-sm fas fa-infinity" style=""></span>数学相关<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="校内课程"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-ghost" style=""></span>校内课程</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/MD/School/Probability/" aria-label="概率论"><span class="font-icon icon fa-fw fa-sm fas fa-chart-simple" style=""></span>概率论<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MD/School/DataStructure/" aria-label="数据结构"><span class="font-icon icon fa-fw fa-sm fas fa-code" style=""></span>数据结构<!----></a></li><li class="dropdown-item"><a class="route-link nav-link active" href="/MD/School/DatabaseSystem/" aria-label="数据库系统"><span class="font-icon icon fa-fw fa-sm fas fa-database" style=""></span>数据库系统<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/MD/School/Others/" aria-label="其他"><span class="font-icon icon fa-fw fa-sm fas fa-bars" style=""></span>其他<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/MD/Others/" aria-label="技术分享"><span class="font-icon icon fa-fw fa-sm fas fa-list" style=""></span>技术分享<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="关于"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-sitemap" style=""></span>关于</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/intro.html" aria-label="关于本站"><span class="font-icon icon fa-fw fa-sm fas fa-globe" style=""></span>关于本站<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/AboutMe.html" aria-label="关于本人"><span class="font-icon icon fa-fw fa-sm fas fa-user" style=""></span>关于本人<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/WataminC" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:none;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:block;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!----></h1><!----><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_1-深刻理解事务的概念。熟记事务的acid性质-包括英文单词、解释、实现机制-。">1. 深刻理解事务的概念。熟记事务的ACID性质（包括英文单词、解释、实现机制）。</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_2-掌握事务控制的多个sql语句。两种结束方式-提交或回滚-的含义及区别。">2. 掌握事务控制的多个SQL语句。两种结束方式（提交或回滚）的含义及区别。</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_3-熟记并发引起的三类数据不一致问题-它们是如何发生的-过程-。">3. 熟记并发引起的三类数据不一致问题，它们是如何发生的（过程？）。</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_4-并发执行-调度-的正确性准则-可串行化——效果等价于一个串行调度。">4. 并发执行（调度）的正确性准则：可串行化——效果等价于一个串行调度。</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_5-并发控制的任务">5. 并发控制的任务</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_6-封锁的基本类型-排他锁-写锁、x锁-、共享锁-读锁、s锁-。它们的相容关系">6. 封锁的基本类型：排他锁（写锁、X锁）、共享锁（读锁、S锁）。它们的相容关系？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_7-有哪几种封锁协议-规则是什么-可分别解决哪些数据不一致性问题">7. 有哪几种封锁协议？规则是什么？可分别解决哪些数据不一致性问题？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_8-数据库恢复技术的基本原理-冗余。建立冗余的两种方法-数据备份和登记日志文件。">8. 数据库恢复技术的基本原理：冗余。建立冗余的两种方法：数据备份和登记日志文件。</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_9-静态备份-vs-动态备份-有否一致性-数据库是否可用-即是否允许用户运行事务来操作数据库-。完全备份-vs-增量备份-优缺点对比-。">9. 静态备份 vs 动态备份（有否一致性；数据库是否可用，即是否允许用户运行事务来操作数据库）。完全备份 vs 增量备份（优缺点对比）。</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/#_10-日志文件-是用来记录事务对数据库进行修改操作的文件">10. 日志文件：是用来记录事务对数据库进行修改操作的文件</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h3 id="_1-深刻理解事务的概念。熟记事务的acid性质-包括英文单词、解释、实现机制-。" tabindex="-1"><a class="header-anchor" href="#_1-深刻理解事务的概念。熟记事务的acid性质-包括英文单词、解释、实现机制-。"><span>1. 深刻理解事务的概念。熟记事务的ACID性质（包括英文单词、解释、实现机制）。</span></a></h3><p>事务是由一系列访问和更新操作组成的程序执行单元。这些操作要么都做，要么都不做，是一个不可分割的整体</p><ol><li>原子性 (Atomicity) <ul><li>事务中包含的所有操作(特指修改操作)要么全部做，要么全不做</li><li>原子性由恢复机制实现</li></ul></li><li>一致性(Consistency) <ul><li>独立执行一个事务（无其它事务同时并发执行）的结果必须保证数据一致性。即事务开始前，数据满足一致性要求；事务结束后，数据虽然变化了，但仍然满足一致性的要求。</li><li>一致性要求是指应用的要求，应根据具体现实而定</li><li>完整性机制实现</li></ul></li><li>隔离性 (Isolation) <ul><li>任何一对事务T1、T2，在T1看来，T2要么在T1开始之前已经结束，要么在T1结束以后再开始执行 (T2对数据库的修改，T1要么全部看到，要么全部看不到)</li><li>隔离性通过并发控制机制(第16章)实现</li></ul></li><li>持久性(Durability) <ul><li>任何事务一旦提交了，它对数据库的影响就必须是永久性的。无论发生任何故障，都不能取消或破坏这种影响</li></ul></li></ol><ul><li>持久性通过恢复机制(第17章)实现</li></ul><h3 id="_2-掌握事务控制的多个sql语句。两种结束方式-提交或回滚-的含义及区别。" tabindex="-1"><a class="header-anchor" href="#_2-掌握事务控制的多个sql语句。两种结束方式-提交或回滚-的含义及区别。"><span>2. 掌握事务控制的多个SQL语句。两种结束方式（提交或回滚）的含义及区别。</span></a></h3><ul><li>事务以Begin transaction语句开始(SQL Server是Start Transaction)，以Commit 或Rollback 语句结束</li><li>Commit 语句：提交事务。此时事务正常结束，事务所做的修改操作都必须永久地写入数据库</li><li>Rollback语句：回滚事务。此时事务非正常结束，事务所做的修改操作都必须撤销(Undo，数据改回旧值)。数据库回退到事务开始前的状态，就好像事务从来没有发生过一样。</li></ul><h3 id="_3-熟记并发引起的三类数据不一致问题-它们是如何发生的-过程-。" tabindex="-1"><a class="header-anchor" href="#_3-熟记并发引起的三类数据不一致问题-它们是如何发生的-过程-。"><span>3. 熟记并发引起的三类数据不一致问题，它们是如何发生的（过程？）。</span></a></h3><ul><li>丢失修改</li></ul><p>并发调度两个事务T1、T2, T1与T2从数据库中读入同一数据后分别修改。假设T1先提交，而T2后提交.则T2提交的修改覆盖了T1提交的修改，导致T1的修改丢失</p><ul><li>不可重复读</li></ul><p>事务T1读取某些数据（记录）后，事务T2对这些数据（记录）做了某种修改操作, 当T1再次读取该数据（记录）时，得到的是与前一次不同的值</p><ul><li>读“脏”数据</li></ul><p>在事务T1两次读取之间，</p><ul><li>另一事务T2更新了记录。则当T1第二次读取时，得到与前一次不同的记录值</li><li>另一事务T2删除了部分记录。则当T1第二次读取时，发现其中的某些记录神秘地消失了</li><li>另一事务T2插入了一些记录。则当T1第二次按相同条件读取时，发现地神秘地多了一些记录</li></ul><p>后两种不可重复读有时也称为幻影现象</p><p>产生不一致问题的根本原因是事务在并发执行（调度）时，没有保证隔离性。</p><h3 id="_4-并发执行-调度-的正确性准则-可串行化——效果等价于一个串行调度。" tabindex="-1"><a class="header-anchor" href="#_4-并发执行-调度-的正确性准则-可串行化——效果等价于一个串行调度。"><span>4. 并发执行（调度）的正确性准则：可串行化——效果等价于一个串行调度。</span></a></h3><h3 id="_5-并发控制的任务" tabindex="-1"><a class="header-anchor" href="#_5-并发控制的任务"><span>5. 并发控制的任务</span></a></h3><ol><li>保证事务的并发执行（调度）是（尽量）正确的，避免不一致问题的产生。常见的一种实现方法是封锁。</li><li>保证事务的隔离性</li><li>保证数据一致性</li></ol><h3 id="_6-封锁的基本类型-排他锁-写锁、x锁-、共享锁-读锁、s锁-。它们的相容关系" tabindex="-1"><a class="header-anchor" href="#_6-封锁的基本类型-排他锁-写锁、x锁-、共享锁-读锁、s锁-。它们的相容关系"><span>6. 封锁的基本类型：排他锁（写锁、X锁）、共享锁（读锁、S锁）。它们的相容关系？</span></a></h3><p>事务T在对某个数据对象（关系、元组等）进行操作之前，先向系统发出请求，对其加锁。事务T对某个数据对象加锁后，其它事务就不能对这个数据对象进行某些相应操作，直到事务T释放它的锁为止</p><ul><li><p>X锁，又称写锁，或排它锁</p><ul><li>事务T 对数据对象A进行修改操作前，给A加上X锁。加上X锁后，其它任何事务都不能再对A加任何类型的锁，直到T释放A上的X锁为止</li></ul></li><li><p>S锁，又称读锁，或共享锁</p><ul><li>事务T 对数据对象A进行读取操作前，给A加上S锁。加上S锁后，其它事务能再对A加S锁，但不能加X锁，直到T释放A上的S锁为止</li></ul></li></ul><p>X锁对所有的请求都不相容, S锁对本身相容</p><h3 id="_7-有哪几种封锁协议-规则是什么-可分别解决哪些数据不一致性问题" tabindex="-1"><a class="header-anchor" href="#_7-有哪几种封锁协议-规则是什么-可分别解决哪些数据不一致性问题"><span>7. 有哪几种封锁协议？规则是什么？可分别解决哪些数据不一致性问题？</span></a></h3><ul><li><p>封锁协议</p><ul><li>事务对数据对象加锁时，还需要遵守某些规则，包括：何时加锁，何时释放。称这些规则为封锁协议(Locking Protocol)</li></ul></li><li><p>三种封锁协议</p><ul><li>一级封锁协议</li><li>二级封锁协议</li><li>三级封锁协议</li></ul></li><li><p>一级封锁协议</p><ul><li>若要修改数据R，事务T必须先对其加X锁(数据R最早的读写操作前)</li><li>X锁直到事务结束(commit或rollback后)才释放</li><li>一级封锁协议可解决丢失修改的问题 <ul><li>没有事务能够修改其它事务正在修改，还未提交的数据</li></ul></li></ul></li><li><p>二级封锁协议</p><ul><li>一级封锁协议＋</li><li>若要读取数据R，事务T必须先对其加S锁(数据R最早的读操作前)</li><li>在读完后，可以在任意时候释放S锁</li><li>二级封锁协议可解决读脏数据的问题</li></ul></li><li><p>三级封锁协议</p><ul><li>一级封锁协议＋</li><li>若要修改数据R，事务T必须先对其加S锁(数据R最早的读操作前)</li><li>直到事务结束后才释放S锁</li><li>三级封锁协议可解决不可重复读的问题 <ul><li>没有事务能够修改其它事务正在读取的数据</li></ul></li></ul></li><li><p>两段式封锁协议</p><ul><li>在对任何数据进行读写之前，事务首先要获得对该数据的封锁 ，释放封锁后不能再读、写该数据</li><li>在释放第一个封锁之后，事务不再获得任何其它封锁，即事务分为两个阶段 <ul><li>生长阶段：获得封锁</li><li>收缩阶段：释放封锁</li></ul></li><li>首次释放掉一个封锁后，即由生长阶段转入收缩阶段</li></ul></li><li><p>定理：若所有事务均遵从两段锁协议，则对这些事务的并行调度都是可串行化的</p><ul><li>反过来，在一个可串行化调度中，不一定所有事务都遵从两段锁协议</li><li>因此，所有事务都遵从两段锁协议，是可串行化调度的充分而不是必要条件</li></ul></li></ul><h3 id="_8-数据库恢复技术的基本原理-冗余。建立冗余的两种方法-数据备份和登记日志文件。" tabindex="-1"><a class="header-anchor" href="#_8-数据库恢复技术的基本原理-冗余。建立冗余的两种方法-数据备份和登记日志文件。"><span>8. 数据库恢复技术的基本原理：冗余。建立冗余的两种方法：数据备份和登记日志文件。</span></a></h3><ul><li><p>事务故障</p><ul><li>因某种原因，事务无法继续执行而失败。 <ol><li>事务内部执行语句产生的逻辑错误。例如：除零、运算溢出，余额不足。</li><li>事务外部条件造成的系统错误。例如：死锁造成事务无法获得执行。</li></ol></li><li>特征 <ul><li>发生故障的事务异常结束。除此之外，系统和其它事务仍正常运行。</li></ul></li><li>恢复（修复故障，解决问题） <ul><li>UNDO 故障事务 —— 找到事务的全部修改并撤消之(改成旧值)，纠正它修改已经写入磁盘的错误。</li></ul></li></ul></li><li><p>系统故障 (Soft Crash, 软故障)</p><ul><li>因某种错误，造成DBMS停止运行 <ol><li>硬件错误。例如CPU或内存故障等</li><li>软件错误。例如OS或者DBMS本身的异常。</li><li>其它，例如突然停电等。</li></ol></li><li>特征 <ul><li>系统需要重新启动。结果缓冲中的数据丢失，但磁盘上的数据仍然完好。</li></ul></li><li>恢复 <ul><li>UNDO 未提交事务 —— 找到这些事务的全部修改并撤消之(改成旧值) ，纠正它们修改已写入磁盘的错误。</li><li>REDO 已提交事务 —— 找到这些事务的全部修改并重做之 (改成新值) ，纠正它们修改未写入磁盘的错误。</li></ul></li></ul></li><li><p>磁盘故障 (Hard Crash, 硬故障)</p><ul><li>因某种原因，磁盘上的数据部分或完全丢失。 <ul><li>一般是相关的人为破坏或者硬件故障，例如：错误的格式化、磁盘坏道、机房失火等。</li></ul></li></ul></li><li><p>特征</p><ul><li>磁盘上的数据丢失。</li></ul></li><li><p>恢复</p><ul><li>根据其它地点（磁盘、磁带）上的数据备份，重建数据库。</li></ul></li><li><p>对未提交的事务，可能出现修改已写入磁盘的错误（需要UNDO）</p></li><li><p>对已提交的事务，可能出现修改未写入磁盘的错误（需要REDO）</p></li><li><p>恢复的基本原理：冗余</p><ul><li>任何数据被破坏或发生错误后，都可以通过存储在其它地点的冗余数据重建该数据。</li></ul></li><li><p>要解决的关键问题</p><ol><li>如何建立冗余数据</li></ol><ul><li>数据转储</li><li>登记日志文件</li></ul><ol start="2"><li>恢复策略（如何根据冗余数据，重建正确的数据） <ol><li>事务故障的恢复</li><li>系统故障的恢复</li><li>磁盘故障的恢复</li></ol></li></ol></li></ul><h3 id="_9-静态备份-vs-动态备份-有否一致性-数据库是否可用-即是否允许用户运行事务来操作数据库-。完全备份-vs-增量备份-优缺点对比-。" tabindex="-1"><a class="header-anchor" href="#_9-静态备份-vs-动态备份-有否一致性-数据库是否可用-即是否允许用户运行事务来操作数据库-。完全备份-vs-增量备份-优缺点对比-。"><span>9. 静态备份 vs 动态备份（有否一致性；数据库是否可用，即是否允许用户运行事务来操作数据库）。完全备份 vs 增量备份（优缺点对比）。</span></a></h3><ul><li>数据转储</li></ul><p>由DBA定期将数据库进行复制，得到后备副本并保存在另外的磁盘或磁带上的过程。</p><ul><li>静态转储 vs 动态转储 <ul><li>静态转储：在转储期间，系统中不能有事务运行。 <ul><li>优点：实现简单，得到的数据库副本有一致性。</li><li>缺点：转储时，数据库不可用。</li></ul></li><li>动态转储：在转储期间，允许事务存取或修改数据 <ul><li>缺点：实现复杂，不能保证数据库副本有一致性。</li><li>优点：转储时，数据库是可用的。</li></ul></li></ul></li></ul><p>思考：为什么动态转储不能保证数据库副本的一致性?</p><ul><li>海量(完全)转储 vs 增量转储 <ul><li>海量转储：转储整个数据库。</li><li>增量转储：转储（自上次转储以来）发生变化的那部分数据。</li></ul></li></ul><h3 id="_10-日志文件-是用来记录事务对数据库进行修改操作的文件" tabindex="-1"><a class="header-anchor" href="#_10-日志文件-是用来记录事务对数据库进行修改操作的文件"><span>10. 日志文件：是用来记录事务对数据库进行修改操作的文件</span></a></h3><p>登记日志文件（logging） 两种类型的日志文件 以记录为操作对象的日志文件 以数据块为操作对象的日志文件 登记到日志文件的内容 登记事务开始(Begin Transaction)的日志记录 登记事务结束(Commit 或 Rollback)的日志记录 登记事务中修改操作对象的日志记录(每次修改对应一条记录)</p><ol><li>日志文件的基本内容（事务开始一条；事务结束一条；事务若干次更新若干条）。在登记修改操作的日志记录时，修改前后的旧值与新值都要保存到日志记录中。</li><li>什么是运行记录优先（先写日志）原则？</li><li>熟记不同类型的数据库故障，包括它们的定义，故障的起因（例如死锁引起事务故障，停电引起系统故障，硬盘坏道引起介质故障等等...），影响范围（事务本身？DBMS系统？内存中的数据？磁盘上的数据？）、恢复策略（方法过程），每种故障类型的恢复过程，及由谁完成（系统自动 or 用户干预？）</li><li>理解检查点机制的原理（写检查点做了什么工作？按相对检查点的位置，把事务分成几类，哪些需要REDO/UNDO，哪些不需要？）。检查点的作用（在恢复系统故障时，大大缩短需要扫描的日志文件的范围，这个范围是从哪里到哪里...）</li><li>熟记引入检查点后，系统故障的恢复过程，并与之前没有检查点时的恢复过程作对比。</li></ol></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/WataminC/edit/main/src/MD/School/DatabaseSystem/Chapter7.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: WataminC@outlook.com">WataminC</span><!--]--><!--]--></div></div></footer><!----><!----><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><!----><div class="vp-copyright">Copyright © 2024 Watamin C </div></footer></div><!--]--><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-05daWFUP.js" defer></script>
  </body>
</html>
